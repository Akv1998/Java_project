- hosts: localhost
  gather_facts: false
  #become: yes
  #become_method: sudo
  become_user: jits
  tasks:

    - name: execute mvn command for shopfront
      shell: pwd && whoami && "mvn clean"
      register: output
      args:
        chdir: ../shopfront
      when: mvn == "shop"
      become_user: jits

    - debug: var="output"  

    - name: execute mvn command for productcatalogue
      command: mvn clean package
      args:
        chdir: ../productcatalogue
      when: mvn == "product"

    - name: execute mvn command for stockmanager
      command: mvn clean package
      args:
        chdir: ../stockmanager
      when: mvn == "stock"